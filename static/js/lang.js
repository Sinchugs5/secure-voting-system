// Language translations
const translations = {
  en: {
    // Common
    'login': 'Login',
    'register': 'Register',
    'logout': 'Logout',
    'submit': 'Submit',
    'back': 'Back',
    'refresh': 'Refresh',
    'location': 'Location',
    'name': 'Name',
    'email': 'Email',
    'mobile': 'Mobile',
    'password': 'Password',
    'class': 'Class',
    'roll_number': 'Roll Number',
    'full_name': 'Full Name',
    'username': 'Username',
    'generate': 'Generate',
    
    // Login/Registration
    'student_login': 'Student Login',
    'student_registration': 'Student Registration',
    'face_login': 'Face Login',
    'verify_otp': 'Verify OTP',
    'enter_otp': 'Enter OTP',
    'lets_vote': "Let's Vote",
    'already_voted': 'Already Voted',
    'voting_closed': 'Voting Closed',
    'create_profile': 'Create Profile',
    'take_photo': 'Take Photo',
    'dont_have_account': "Don't have an account? Create New Profile",
    'profile_created': 'Profile Created Successfully!',
    'go_to_login': 'Go to Login',
    'click_button_location': 'Click button to get location',
    
    // Voter Details
    'authentication_successful': 'Authentication Successful!',
    'welcome_voting_system': 'Welcome to the voting system',
    'voting_schedule': 'Voting Schedule',
    'otp_verified': 'OTP Verified',
    'face_verified': 'Face Verified',
    'view_results': 'View Results',
    'wait_for_results': 'Wait for Results',
    
    // Results
    'election_results': 'Election Results',
    'winner': 'Winner',
    'votes': 'votes',
    'time_remaining': 'Time Remaining',
    'voting_ended': 'Voting Ended!',
    
    // Dashboard
    'election_system': 'Face Login Election System',
    'secure_voting': 'Secure Digital Voting Platform',
    'secure_auth': 'Secure Authentication',
    'otp_face_verify': 'OTP + Face Verification',
    'location_tracking': 'Location Tracking',
    'geo_verification': 'Geo-location Verification',
    'scheduled_voting': 'Scheduled Voting',
    'time_controlled': 'Time-controlled Elections',
    'admin_login': 'Admin Login',
    'voter_login': 'Voter Login',
    'register_now': 'Register Now',
    'powered_by': 'Powered by Advanced Face Recognition & Blockchain Technology'
  },
  
  kn: {
    // Common
    'login': 'ಲಾಗಿನ್',
    'register': 'ನೋಂದಣಿ',
    'logout': 'ಲಾಗ್ ಔಟ್',
    'submit': 'ಸಲ್ಲಿಸಿ',
    'back': 'ಹಿಂದೆ',
    'refresh': 'ರಿಫ್ರೆಶ್',
    'location': 'ಸ್ಥಳ',
    'name': 'ಹೆಸರು',
    'email': 'ಇಮೇಲ್',
    'mobile': 'ಮೊಬೈಲ್',
    'password': 'ಪಾಸ್ವರ್ಡ್',
    'class': 'ವರ್ಗ',
    'roll_number': 'ರೋಲ್ ಸಂಖ್ಯೆ',
    'full_name': 'ಪೂರ್ಣ ಹೆಸರು',
    'username': 'ಬೇರೆರ ಹೆಸರು',
    'generate': 'ಉತ್ಪನ್ನ ಮಾಡಿ',
    
    // Login/Registration
    'student_login': 'ವಿದ್ಯಾರ್ಥಿ ಲಾಗಿನ್',
    'student_registration': 'ವಿದ್ಯಾರ್ಥಿ ನೋಂದಣಿ',
    'face_login': 'ಮುಖ ಲಾಗಿನ್',
    'verify_otp': 'OTP ಪರಿಶೀಲಿಸಿ',
    'enter_otp': 'OTP ನಮೂದಿಸಿ',
    'lets_vote': 'ಮತ ಚಲಾಯಿಸೋಣ',
    'already_voted': 'ಈಗಾಗಲೇ ಮತ ಚಲಾಯಿಸಲಾಗಿದೆ',
    'voting_closed': 'ಮತದಾನ ಮುಚ್ಚಲಾಗಿದೆ',
    'create_profile': 'ಪ್ರೊಫೈಲ್ ರಚಿಸಿ',
    'take_photo': 'ಫೋಟೋ ತೆಗೆಯಿರಿ',
    'dont_have_account': 'ಖಾತೆ ಇಲ್ಲವಾ? ಹೊಸ ಪ್ರೊಫೈಲ್ ರಚಿಸಿ',
    'profile_created': 'ಪ್ರೊಫೈಲ್ ಯಶಸ್ವಿಯಾಗಿ ರಚಿಸಲಾಗಿದೆ!',
    'go_to_login': 'ಲಾಗಿನ್ ಗೆ ಹೋಗಿ',
    'click_button_location': 'ಸ್ಥಳ ಪಡೆಯಲು ಬಟನ್ ಕ್ಲಿಕ್ ಮಾಡಿ',
    
    // Voter Details
    'authentication_successful': 'ದೃಢೀಕರಣ ಯಶಸ್ವಿಯಾಗಿದೆ!',
    'welcome_voting_system': 'ಮತದಾನ ವ್ಯವಸ್ಥೆಗೆ ಸ್ವಾಗತ',
    'voting_schedule': 'ಮತದಾನ ವೇಳಾಪಟ್ಟಿ',
    'otp_verified': 'OTP ಪರಿಶೀಲಿಸಲಾಗಿದೆ',
    'face_verified': 'ಮುಖ ಪರಿಶೀಲಿಸಲಾಗಿದೆ',
    'view_results': 'ಫಲಿತಾಂಶಗಳನ್ನು ವೀಕ್ಷಿಸಿ',
    'wait_for_results': 'ಫಲಿತಾಂಶಗಳಿಗಾಗಿ ಕಾಯಿರಿ',
    
    // Results
    'election_results': 'ಚುನಾವಣಾ ಫಲಿತಾಂಶಗಳು',
    'winner': 'ವಿಜೇತ',
    'votes': 'ಮತಗಳು',
    'time_remaining': 'ಉಳಿದ ಸಮಯ',
    'voting_ended': 'ಮತದಾನ ಮುಗಿದಿದೆ!',
    
    // Dashboard
    'election_system': 'ಮುಖ ಲಾಗಿನ್ ಚುನಾವಣಾ ವ್ಯವಸ್ಥೆ',
    'secure_voting': 'ಸುರಕ್ಷಿತ ಡಿಜಿಟಲ್ ಮತದಾನ ವೇದಿಕೆ',
    'secure_auth': 'ಸುರಕ್ಷಿತ ದೃಢೀಕರಣ',
    'otp_face_verify': 'OTP + ಮುಖ ಪರಿಶೀಲನೆ',
    'location_tracking': 'ಸ್ಥಳ ಟ್ರ್ಯಾಕಿಂಗ್',
    'geo_verification': 'ಭೌಗೋಳಿಕ ಸ್ಥಳ ಪರಿಶೀಲನೆ',
    'scheduled_voting': 'ನಿಗದಿತ ಮತದಾನ',
    'time_controlled': 'ಸಮಯ-ನಿಯಂತ್ರಿತ ಚುನಾವಣೆಗಳು',
    'admin_login': 'ನಿರ್ವಾಹಕ ಲಾಗಿನ್',
    'voter_login': 'ಮತದಾರ ಲಾಗಿನ್',
    'register_now': 'ಈಗ ನೋಂದಣಿ ಮಾಡಿ',
    'powered_by': 'ಸುಧಾರಿತ ಮುಖ ಗುರುತಿಸುವಿಕೆ ಮತ್ತು ಬ್ಲಾಕ್ಚೈನ್ ತಂತ್ರಜ್ಞಾನದಿಂದ ಚಾಲಿತ'
  },
  
  hi: {
    // Common
    'login': 'लॉगिन',
    'register': 'पंजीकरण',
    'logout': 'लॉग आउट',
    'submit': 'जमा करें',
    'back': 'वापस',
    'refresh': 'रीफ्रेश',
    'location': 'स्थान',
    'name': 'नाम',
    'email': 'ईमेल',
    'mobile': 'मोबाइल',
    'password': 'पासवर्ड',
    'class': 'कक्षा',
    'roll_number': 'रोल नंबर',
    'full_name': 'पूरा नाम',
    'username': 'यूजरनेम',
    'generate': 'जेनरेट करें',
    
    // Login/Registration
    'student_login': 'छात्र लॉगिन',
    'student_registration': 'छात्र पंजीकरण',
    'face_login': 'फेस लॉगिन',
    'verify_otp': 'OTP सत्यापित करें',
    'enter_otp': 'OTP दर्ज करें',
    'lets_vote': 'वोट करें',
    'already_voted': 'पहले से वोट किया',
    'voting_closed': 'मतदान बंद',
    'create_profile': 'प्रोफाइल बनाएं',
    'take_photo': 'फोटो लें',
    'dont_have_account': 'खाता नहीं है? नया प्रोफाइल बनाएं',
    'profile_created': 'प्रोफाइल सफलतापूर्वक बनाया गया!',
    'go_to_login': 'लॉगिन पर जाएं',
    'click_button_location': 'स्थान पाने के लिए बटन दबाएं',
    
    // Voter Details
    'authentication_successful': 'प्रमाणीकरण सफल!',
    'welcome_voting_system': 'मतदान प्रणाली में आपका स्वागत है',
    'voting_schedule': 'मतदान कार्यक्रम',
    'otp_verified': 'OTP सत्यापित',
    'face_verified': 'चेहरा सत्यापित',
    'view_results': 'परिणाम देखें',
    'wait_for_results': 'परिणाम की प्रतीक्षा करें',
    
    // Results
    'election_results': 'चुनाव परिणाम',
    'winner': 'विजेता',
    'votes': 'वोट',
    'time_remaining': 'शेष समय',
    'voting_ended': 'मतदान समाप्त!',
    
    // Dashboard
    'election_system': 'फेस लॉगिन चुनाव प्रणाली',
    'secure_voting': 'सुरक्षित डिजिटल मतदान प्लेटफॉर्म',
    'secure_auth': 'सुरक्षित प्रमाणीकरण',
    'otp_face_verify': 'OTP + चेहरा सत्यापन',
    'location_tracking': 'स्थान ट्रैकिंग',
    'geo_verification': 'भू-स्थान सत्यापन',
    'scheduled_voting': 'निर्धारित मतदान',
    'time_controlled': 'समय-नियंत्रित चुनाव',
    'admin_login': 'एडमिन लॉगिन',
    'voter_login': 'मतदाता लॉगिन',
    'register_now': 'अभी पंजीकरण करें',
    'powered_by': 'उन्नत चेहरा पहचान और ब्लॉकचेन प्रौद्योगिकी द्वारा संचालित'
  }
};

// Current language
let currentLang = localStorage.getItem('language') || 'en';

// Translation function
function t(key) {
  return translations[currentLang][key] || translations['en'][key] || key;
}

// Change language
function changeLanguage(lang) {
  currentLang = lang;
  localStorage.setItem('language', lang);
  updatePageText();
}

// Update all text on page
function updatePageText() {
  document.querySelectorAll('[data-translate]').forEach(element => {
    const key = element.getAttribute('data-translate');
    if (element.tagName === 'INPUT' && (element.type === 'text' || element.type === 'email' || element.type === 'password' || element.type === 'tel')) {
      element.placeholder = t(key);
    } else {
      element.textContent = t(key);
    }
  });
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', function() {
  // Set the language selector to current language
  const langSelector = document.querySelector('select[onchange="changeLanguage(this.value)"]');
  if (langSelector) {
    langSelector.value = currentLang;
  }
  updatePageText();
});

// Make sure changeLanguage is available globally
window.changeLanguage = changeLanguage;
window.t = t;